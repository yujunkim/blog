# encoding: UTF-8
require './captcha'
require './converter'
class NaverBlog
  include Converter
  def initialize(post)
    @post = post
    @type = post.type
  end

  def category_no
    case @type
    when :tablo
      11
    when :music_camp
      12
    end
  end

  def write_post(data)
    html = data[:html]
    title = data[:title]
    tags = data[:tags]
    date = data[:date]
    post_id = `curl 'http://blog.naver.com/TempPostWriteAsync.nhn' -H 'Referer: http://blog.naver.com/plmmoknn/postwrite' -H 'Cookie: NNB=YLXBSFUGBOQFC; NB=HE2TGMRSGQYDSNRQ; npic=upzXgATKcNn+fj5aqUTduzajFPKrGT+8WdkN+r1/itHPZ2AReEvC/9j8+VAQeOS5CA==; stat_guestid=13694583493531q2mFP71; __gads=ID=75145ed6c8f18a93:T=1374249071:S=ALNI_MbE7KnhCOkb6JnTEEYI7KMwq6jsdQ; stat_yn=1; NNF=off; nid_tct=Pp8xbq5sjlGZzp73; WMONID=mAcvldt_CmI; visitcount|inmydream864=inmydream864; visitcount|jiyeon0153=jiyeon0153; visitcount|soungsu12=soungsu12; visitcount|wmxxxxxxxx=wmxxxxxxxx; BMR=s=1402637131503&r=http%3A%2F%2Fnstore.naver.com%2Fappstore%2Fweb%2Fdetail.nhn%3FproductNo%3D1336080&r2=http%3A%2F%2Fnstore.naver.com%2Fappstore%2Fandroid%2Fhome.nhn; mrblog=plmmoknn%ok; visitcount|ssaea=ssaea; bHideResizeNotice=1; NID_SES=AAABTPj9SqZ3ih+kLD2Vh6W/hd+ccA97TX2/uNGa5+NFDExFntXHIikc3LiFgsdiw3xhF2dRvOc8iSRDCSOvPQNawbgvV4te0Offa2d8E0ZROAq+pmb/8JwSdjBishkRb6JkpOCrRSHKuS5loilsgGriamh6a7Nk006o9nKVZnvP4D3reDoGGxLInqke0ApzqZM2qbd+ikjwAC9gUjcog7qxjBF38SMOnb2lfODRVdRiO5iDEaVJk/XnDRbdt7Owg+ceWGNU6YoZYGC0JfqwnkNms9X+WbXNDrVJbd3X8uHEIw1lbDdmh2VISpU+svDB5dxiKlrGizCdpNZTkx/Sjy7OsKPG4vJfA5ei7hi8zIOP/uxz51DjPRl3JJkErjWGuAnSG6LWtN0HDGZIwVcsR2qbgbuqgs4hDQzi7h1s59iV/V/Q481SoTrXqZUUDZkJ+ogrVg==; page_uid=RH1amz33wv4sstMCA78ssssssuw-288879; NID_AUT=5qP7Xm4wZ6hsMUaCIxa/99ceoYyaF+fyHbJOJ8pbPjFjs+tno6w70/SlpBGIp5vN05d0ABlg1rO5XNEb7pYbwQLR/qDBL1k8dj3AkLDcJQ1hOL1m7wZe5Cgy+KGGZCps; JSESSIONID=BE00329DDE360CF92C5F7EB211A0D8E3.jvm1' --data 'blogId=plmmoknn&post.sourceCode=0&post.contents.contentsValue=0&post.prePostRegistDirectly=false&smartEditorVersion=2&post.book.ratingScore=0&post.music.ratingScore=0&post.movie.ratingScore=0&post.scrapedYn=false&post.contents.summaryYn=false&post.templatePhoto.width=0&post.templatePhoto.height=0&post.postOptions.openType=2&post.postOptions.commentYn=true&post.postOptions.isRelayOpen=true&post.postOptions.sympathyYn=false&post.postOptions.outSideAllowYn=true&post.me2dayPostingYn=false&post.facebookPostingYn=false&post.twitterPostingYn=false&post.postOptions.searchYn=true&post.postOptions.rssOpenYn=true&post.postOptions.scrapType=2&post.postOptions.ccl.commercialUsesYn=false&directorySeq=#{category_no}&post.postOptions.directoryOptions.directoryChangeYn=false&post.postOptions.directoryOptions.tagAutoChangedYn=false&post.postOptions.isAutoTaggingEnabled=true&post.postOptions.greenReviewBannerYn=false&previewGreenReviewBannerAsInteger=0&post.postOptions.isContinueSaved=false&post.postOptions.isExifEnabled=false&editorSource=cX2iPVAZ55Nql8B%2FXLbSdg%3D%3D&post.category.categoryNo=#{category_no}&post.title=#{euc_uri(title)}&ir1=%0A%0A&char_preview=%C2%AE%C2%BA%E2%8A%86%E2%97%8F%E2%97%8B&se2_tbp3=on&=on&post.directorySeq=#{category_no}&post.tag.names=#{euc_uri(tags)}&openType=2&post.postWriteTimeType=now&prePostDay=2014%EB%85%84%2006%EC%9B%94%2009%EC%9D%BC&prePostDateType.hour=19&prePostDateType.minute=20&commercialUses=false&contentsModification=0&writingMaterialInfos=%5B%5D' --compressed`

    captcha_key, captcha_value = solve_captcha

    curl = "curl 'http://blog.naver.com/PostWrite.nhn' -H 'Pragma: no-cache' -H 'Origin: http://blog.naver.com' -H 'Accept-Encoding: gzip,deflate,sdch' -H 'Accept-Language: ko-KR,ko;q=0.8,en-US;q=0.6,en;q=0.4' -H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/35.0.1916.114 Safari/537.36' -H 'Content-Type: application/x-www-form-urlencoded' -H 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8' -H 'Cache-Control: no-cache' -H 'Referer: http://blog.naver.com/plmmoknn/postwrite?categoryNo=#{category_no}' -H 'Cookie: NNB=YLXBSFUGBOQFC; NB=HE2TGMRSGQYDSNRQ; npic=upzXgATKcNn+fj5aqUTduzajFPKrGT+8WdkN+r1/itHPZ2AReEvC/9j8+VAQeOS5CA==; stat_guestid=13694583493531q2mFP71; __gads=ID=75145ed6c8f18a93:T=1374249071:S=ALNI_MbE7KnhCOkb6JnTEEYI7KMwq6jsdQ; stat_yn=1; NNF=off; nid_tct=Pp8xbq5sjlGZzp73; WMONID=mAcvldt_CmI; visitcount|inmydream864=inmydream864; visitcount|jiyeon0153=jiyeon0153; visitcount|soungsu12=soungsu12; visitcount|wmxxxxxxxx=wmxxxxxxxx; BMR=s=1402637131503&r=http%3A%2F%2Fnstore.naver.com%2Fappstore%2Fweb%2Fdetail.nhn%3FproductNo%3D1336080&r2=http%3A%2F%2Fnstore.naver.com%2Fappstore%2Fandroid%2Fhome.nhn; mrblog=plmmoknn%ok; visitcount|ssaea=ssaea; bHideResizeNotice=1; NID_SES=AAABTPj9SqZ3ih+kLD2Vh6W/hd+ccA97TX2/uNGa5+NFDExFntXHIikc3LiFgsdiw3xhF2dRvOc8iSRDCSOvPQNawbgvV4te0Offa2d8E0ZROAq+pmb/8JwSdjBishkRb6JkpOCrRSHKuS5loilsgGriamh6a7Nk006o9nKVZnvP4D3reDoGGxLInqke0ApzqZM2qbd+ikjwAC9gUjcog7qxjBF38SMOnb2lfODRVdRiO5iDEaVJk/XnDRbdt7Owg+ceWGNU6YoZYGC0JfqwnkNms9X+WbXNDrVJbd3X8uHEIw1lbDdmh2VISpU+svDB5dxiKlrGizCdpNZTkx/Sjy7OsKPG4vJfA5ei7hi8zIOP/uxz51DjPRl3JJkErjWGuAnSG6LWtN0HDGZIwVcsR2qbgbuqgs4hDQzi7h1s59iV/V/Q481SoTrXqZUUDZkJ+ogrVg==; page_uid=RH1amz33wv4sstMCA78ssssssuw-288879; NID_AUT=5qP7Xm4wZ6hsMUaCIxa/99ceoYyaF+fyHbJOJ8pbPjFjs+tno6w70/SlpBGIp5vN05d0ABlg1rO5XNEb7pYbwQLR/qDBL1k8dj3AkLDcJQ1hOL1m7wZe5Cgy+KGGZCps; JSESSIONID=BE00329DDE360CF92C5F7EB211A0D8E3.jvm1' -H 'Connection: keep-alive'"
    curl += " --data 'captchaKey=#{captcha_key}&captchaValue=#{captcha_value}&appId=&tempLogNo=&blogId=plmmoknn&post.logNo=#{post_id}&post.sourceCode=0&post.contents.contentsValue=#{euc_uri(html)}&post.prePostRegistDirectly=false&post.lastRelayTime=&smartEditorVersion=2&post.book.ratingScore=0&post.music.ratingScore=0&post.movie.ratingScore=0&post.scrapedYn=false&post.clientType=&post.contents.summaryYn=false&post.contents.summaryToggleText=&post.contents.summaryTogglePosition=&post.templatePhoto.width=0&post.templatePhoto.height=0&post.addedInfoSet.addedInfoStruct=&post.mapAttachmentSet.mapAttachStruct=&post.calendarAttachmentSet.calendarAttachmentStruct=&post.musicPlayerAttachmentSet.musicPlayerAttachmentStruct=&post.eventWriteInfo.eventCode=&post.eventWriteInfo.writeCode=&post.eventWriteInfo.eventType=&post.eventWriteInfo.eventLink=&post.postOptions.openType=2&post.postOptions.commentYn=true&post.postOptions.isRelayOpen=true&post.postOptions.sympathyYn=false&post.postOptions.outSideAllowYn=true&post.me2dayPostingYn=false&post.facebookPostingYn=false&post.twitterPostingYn=false&post.postOptions.searchYn=true&post.postOptions.rssOpenYn=true&post.postOptions.scrapType=2&post.postOptions.ccl.commercialUsesYn=false&post.postOptions.ccl.contentsModification=&post.postOptions.attachedVideoScrapYn=&directorySeq=#{category_no}&directoryDetail=&post.bookTheme.infoPk=&post.movieTheme.infoPk=&post.musicTheme.infoPk=&post.kitchenTheme.recipeName=&post.postOptions.directoryOptions.directoryChangeYn=false&post.postOptions.directoryOptions.tagAutoChangedYn=false&post.postOptions.isAutoTaggingEnabled=true&post.postOptions.greenReviewBannerYn=false&previewGreenReviewBannerAsInteger=0&post.leverageOptions.themeSourceCode=&post.music.subType=&post.postOptions.isContinueSaved=false&post.mrBlogTalk.talkCode=&happyBeanGiveDayReqparam=&post.postOptions.isExifEnabled=false&editorSource=zIZ3zCLVRfJjqSjWPcYUvg%3D%3D&post.category.categoryNo=#{category_no}&post.title=#{euc_uri(title)}&post.trackback.trackbackUrl=&ir1=#{euc_uri(html)}&char_preview=%A2%E7%A8%AC%A1%F6%A1%DC%A1%DB&se2_tbp3=on&post.directorySeq=#{category_no}&post.tag.names=#{euc_uri(tags)}&openType=2&post.postWriteTimeType=now&prePostDay=2014%B3%E2+6%BF%F9+10%C0%CF&prePostDateType.hour=23&prePostDateType.minute=30&prePostDateType.year=2014&prePostDateType.month=6&prePostDateType.date=10&commercialUses=false&contentsModification=0&writingMaterialInfos=%5B%5D' --compressed"

    respone_str = `#{curl}`
    begin
      post_id = respone_str.force_encoding("UTF-8").match(/logNo=[0-9]+/).to_s[6 .. -1]

      db_save(:naver_blog, *[@type, date.to_s, 'post_id', post_id])
    rescue
      @post.crawl_update = true
    end
  end

  def update_post(data, post_id)
    html = data[:html]
    title = data[:title]
    tags = data[:tags]
    curl = "curl 'http://blog.naver.com/PostUpdate.nhn' -H 'Pragma: no-cache' -H 'Origin: http://blog.naver.com' -H 'Accept-Encoding: gzip,deflate,sdch' -H 'Accept-Language: ko-KR,ko;q=0.8,en-US;q=0.6,en;q=0.4' -H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/35.0.1916.114 Safari/537.36' -H 'Content-Type: application/x-www-form-urlencoded' -H 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8' -H 'Cache-Control: no-cache' -H 'Referer: http://blog.naver.com/plmmoknn/postwrite?categoryNo=#{category_no}' -H 'Cookie: NNB=YLXBSFUGBOQFC; NB=HE2TGMRSGQYDSNRQ; npic=upzXgATKcNn+fj5aqUTduzajFPKrGT+8WdkN+r1/itHPZ2AReEvC/9j8+VAQeOS5CA==; stat_guestid=13694583493531q2mFP71; __gads=ID=75145ed6c8f18a93:T=1374249071:S=ALNI_MbE7KnhCOkb6JnTEEYI7KMwq6jsdQ; stat_yn=1; NNF=off; nid_tct=Pp8xbq5sjlGZzp73; WMONID=mAcvldt_CmI; visitcount|inmydream864=inmydream864; visitcount|jiyeon0153=jiyeon0153; visitcount|soungsu12=soungsu12; visitcount|wmxxxxxxxx=wmxxxxxxxx; BMR=s=1402637131503&r=http%3A%2F%2Fnstore.naver.com%2Fappstore%2Fweb%2Fdetail.nhn%3FproductNo%3D1336080&r2=http%3A%2F%2Fnstore.naver.com%2Fappstore%2Fandroid%2Fhome.nhn; mrblog=plmmoknn%ok; visitcount|ssaea=ssaea; bHideResizeNotice=1; NID_SES=AAABTPj9SqZ3ih+kLD2Vh6W/hd+ccA97TX2/uNGa5+NFDExFntXHIikc3LiFgsdiw3xhF2dRvOc8iSRDCSOvPQNawbgvV4te0Offa2d8E0ZROAq+pmb/8JwSdjBishkRb6JkpOCrRSHKuS5loilsgGriamh6a7Nk006o9nKVZnvP4D3reDoGGxLInqke0ApzqZM2qbd+ikjwAC9gUjcog7qxjBF38SMOnb2lfODRVdRiO5iDEaVJk/XnDRbdt7Owg+ceWGNU6YoZYGC0JfqwnkNms9X+WbXNDrVJbd3X8uHEIw1lbDdmh2VISpU+svDB5dxiKlrGizCdpNZTkx/Sjy7OsKPG4vJfA5ei7hi8zIOP/uxz51DjPRl3JJkErjWGuAnSG6LWtN0HDGZIwVcsR2qbgbuqgs4hDQzi7h1s59iV/V/Q481SoTrXqZUUDZkJ+ogrVg==; page_uid=RH1amz33wv4sstMCA78ssssssuw-288879; NID_AUT=5qP7Xm4wZ6hsMUaCIxa/99ceoYyaF+fyHbJOJ8pbPjFjs+tno6w70/SlpBGIp5vN05d0ABlg1rO5XNEb7pYbwQLR/qDBL1k8dj3AkLDcJQ1hOL1m7wZe5Cgy+KGGZCps; JSESSIONID=BE00329DDE360CF92C5F7EB211A0D8E3.jvm1' -H 'Connection: keep-alive'"
    curl += " --data 'captchaKey=&captchaValue=&appId=&tempLogNo=&blogId=plmmoknn&post.logNo=#{post_id}&post.sourceCode=0&post.contents.contentsValue=#{euc_uri(html)}&post.prePostRegistDirectly=false&post.lastRelayTime=&smartEditorVersion=2&post.book.ratingScore=0&post.music.ratingScore=0&post.movie.ratingScore=0&post.scrapedYn=false&post.clientType=&post.contents.summaryYn=false&post.contents.summaryToggleText=&post.contents.summaryTogglePosition=&post.templatePhoto.width=0&post.templatePhoto.height=0&post.addedInfoSet.addedInfoStruct=&post.mapAttachmentSet.mapAttachStruct=&post.calendarAttachmentSet.calendarAttachmentStruct=&post.musicPlayerAttachmentSet.musicPlayerAttachmentStruct=&post.eventWriteInfo.eventCode=&post.eventWriteInfo.writeCode=&post.eventWriteInfo.eventType=&post.eventWriteInfo.eventLink=&post.postOptions.openType=2&post.postOptions.commentYn=true&post.postOptions.isRelayOpen=true&post.postOptions.sympathyYn=false&post.postOptions.outSideAllowYn=true&post.me2dayPostingYn=false&post.facebookPostingYn=false&post.twitterPostingYn=false&post.postOptions.searchYn=true&post.postOptions.rssOpenYn=true&post.postOptions.scrapType=2&post.postOptions.ccl.commercialUsesYn=false&post.postOptions.ccl.contentsModification=&post.postOptions.attachedVideoScrapYn=&directorySeq=#{category_no}&directoryDetail=&post.bookTheme.infoPk=&post.movieTheme.infoPk=&post.musicTheme.infoPk=&post.kitchenTheme.recipeName=&post.postOptions.directoryOptions.directoryChangeYn=false&post.postOptions.directoryOptions.tagAutoChangedYn=false&post.postOptions.isAutoTaggingEnabled=true&post.postOptions.greenReviewBannerYn=false&previewGreenReviewBannerAsInteger=0&post.leverageOptions.themeSourceCode=&post.music.subType=&post.postOptions.isContinueSaved=false&post.mrBlogTalk.talkCode=&happyBeanGiveDayReqparam=&post.postOptions.isExifEnabled=false&editorSource=zIZ3zCLVRfJjqSjWPcYUvg%3D%3D&post.category.categoryNo=#{category_no}&post.title=#{euc_uri(title)}&post.trackback.trackbackUrl=&ir1=#{euc_uri(html)}&char_preview=%A2%E7%A8%AC%A1%F6%A1%DC%A1%DB&se2_tbp3=on&post.directorySeq=#{category_no}&post.tag.names=#{euc_uri(tags)}&openType=2&post.postWriteTimeType=now&prePostDay=2014%B3%E2+6%BF%F9+10%C0%CF&prePostDateType.hour=23&prePostDateType.minute=30&prePostDateType.year=2014&prePostDateType.month=6&prePostDateType.date=10&commercialUses=false&contentsModification=0&writingMaterialInfos=%5B%5D' --compressed"

    `#{curl}`
  end


  def solve_captcha
    `curl 'http://blog.naver.com/PostWriteCaptchaLayerOpen.nhn?blogId=plmmoknn' -H 'Pragma: no-cache' -H 'Accept-Encoding: gzip,deflate,sdch' -H 'Accept-Language: ko-KR,ko;q=0.8,en-US;q=0.6,en;q=0.4' -H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/35.0.1916.153 Safari/537.36' -H 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8' -H 'Referer: http://blog.naver.com/plmmoknn/postwrite' -H 'Cookie: NNB=YLXBSFUGBOQFC; NB=HE2TGMRSGQYDSNRQ; npic=upzXgATKcNn+fj5aqUTduzajFPKrGT+8WdkN+r1/itHPZ2AReEvC/9j8+VAQeOS5CA==; stat_guestid=13694583493531q2mFP71; __gads=ID=75145ed6c8f18a93:T=1374249071:S=ALNI_MbE7KnhCOkb6JnTEEYI7KMwq6jsdQ; stat_yn=1; NNF=off; nid_tct=Pp8xbq5sjlGZzp73; WMONID=mAcvldt_CmI; visitcount|inmydream864=inmydream864; visitcount|jiyeon0153=jiyeon0153; visitcount|soungsu12=soungsu12; visitcount|wmxxxxxxxx=wmxxxxxxxx; BMR=s=1402637131503&r=http%3A%2F%2Fnstore.naver.com%2Fappstore%2Fweb%2Fdetail.nhn%3FproductNo%3D1336080&r2=http%3A%2F%2Fnstore.naver.com%2Fappstore%2Fandroid%2Fhome.nhn; srch_date="day|2014/06/14|2014/06/14"; mrblog=plmmoknn%ok; visitcount|ssaea=ssaea; bHideResizeNotice=1; page_uid=RH1BJdpySD8sstT+urVssssssuh-047384; NID_AUT=OGMLDuw4WwwCFu9qI/0Jybcn3sCpcPaRpXz6EIL0NZnDKkkFb1yrYDddGn1xYhc00pS5DTozwAHn4P5O5MCdOC/aDkKdfiVkpaOYmEXMbhCl+u9pZOVgFTxZ0s+bMp98; NID_SES=AAABSOAwyiQ/UWQz2+U22lmDHT/sO4zOJbGf6yNU5TvT6o1bAT4cwimERFq7UDTxepPnGNSIzVmbcgJjQq0ecSxtLp9VPY1ulpsjMplqMZoBLCEmlisTpmeX0x7l8QifOfQFd3Fie8GdYhycLRVyhfg7qXN8Tx0e9DWXVtxZf4rnsNwqi6J9XO0bD2lrQa0sgCl06Qy3N8hqIGx0kIjxYHr//WjZnfHCRWssz10dF3+L7GwFtC5r04M4MB7hOENVpLD3YRdQVoD+hWDvGBsoaxjf0GtApToyWHVB/qE297iXt0jMuAALM/CKMKFH7OBx+0Pc1P4VM3IBJ6+eGXhlA19EogWtS8raBT/rQKOV49LaPw91bL+XbOcFdHDnOkBiEdcAhu0GO3ZstLCTWwuGb6zyxAifZY7aLfkRQJyzGfoxuvzS4o5SX5c6NRP1s1kwaM/GQQ==; JSESSIONID=E3CBA275A651A40A14262EF36CB41735.jvm1' -H 'Connection: keep-alive' -H 'Cache-Control: no-cache' --compressed`

    captcha_image_key = `curl 'http://blog.naver.com/GetCaptchaKey.nhn' -X POST -H 'Pragma: no-cache' -H 'Origin: http://blog.naver.com' -H 'Accept-Encoding: gzip,deflate,sdch' -H 'Accept-Language: ko-KR,ko;q=0.8,en-US;q=0.6,en;q=0.4' -H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/35.0.1916.153 Safari/537.36' -H 'Content-Type: application/x-www-form-urlencoded; charset=utf-8' -H 'Accept: */*' -H 'charset: utf-8' -H 'Cache-Control: no-cache' -H 'Referer: http://blog.naver.com/PostWriteCaptchaLayerOpen.nhn?blogId=plmmoknn' -H 'Cookie: NNB=YLXBSFUGBOQFC; NB=HE2TGMRSGQYDSNRQ; npic=upzXgATKcNn+fj5aqUTduzajFPKrGT+8WdkN+r1/itHPZ2AReEvC/9j8+VAQeOS5CA==; stat_guestid=13694583493531q2mFP71; __gads=ID=75145ed6c8f18a93:T=1374249071:S=ALNI_MbE7KnhCOkb6JnTEEYI7KMwq6jsdQ; stat_yn=1; NNF=off; nid_tct=Pp8xbq5sjlGZzp73; WMONID=mAcvldt_CmI; visitcount|inmydream864=inmydream864; visitcount|jiyeon0153=jiyeon0153; visitcount|soungsu12=soungsu12; visitcount|wmxxxxxxxx=wmxxxxxxxx; BMR=s=1402637131503&r=http%3A%2F%2Fnstore.naver.com%2Fappstore%2Fweb%2Fdetail.nhn%3FproductNo%3D1336080&r2=http%3A%2F%2Fnstore.naver.com%2Fappstore%2Fandroid%2Fhome.nhn; srch_date="day|2014/06/14|2014/06/14"; mrblog=plmmoknn%ok; visitcount|ssaea=ssaea; bHideResizeNotice=1; page_uid=RH1BJdpySD8sstT+urVssssssuh-047384; NID_SES=AAABSVBmnK6jjbTC2BG67qLhOIJckBHoz7S+SWf040yQl8wHJKkUzf0rcd5o98FCLZOTHrtEW30aLR600TejviMoMwP4vnHt89RTpK1tnciO4ORHcT8x97X+Xb95TuHKSg5qAOxbV+MGtBfHISlYuKwagcD6umQjtz6w+cyGx+KKQW6FQhynpgdhJl7lqdXDzQFz8c6KVyC058ASkecShaulRFMjwDUR7hOBMFdEKn+OpMO2no0PSRo1ra7wZfSD+eLm2xRmd8XJoY9vQP4OwlHgVgrXzNGFSjyGlBQRbFaT2JGBc5MDQRJLtmVj+VcSnS6OvhGEr+JpX8uMCEIGyDQqcdD+ExperHmaOA7FFVKJZ3DGxskCaFq7TsIYhEi8XsH6YCPBBn/UoqMnRt6XbVVlA5A4KPEZO/LhAQoW61MPRLrh5LRHalRCWbi+J2S8nmWDgA==; NID_AUT=OGMLDuw4WwwCFu9qI/0Jybcn3sCpcPaRpXz6EIL0NZnDKkkFb1yrYDddGn1xYhc00pS5DTozwAHn4P5O5MCdOC/aDkKdfiVkpaOYmEXMbhCl+u9pZOVgFTxZ0s+bMp98; JSESSIONID=7F7127E16E47B77327C5FAECE2E7021A.jvm1' -H 'Connection: keep-alive' -H 'Content-Length: 0' --compressed`

    captcha_key, captcha_value = Captcha.get_captcha_value("http://captcha.naver.com/nhncaptcha2.gif?key=#{captcha_image_key}")

    puts `curl 'http://blog.naver.com/CaptchaValidCheck.nhn?blogId=plmmoknn' -H 'Pragma: no-cache' -H 'Origin: http://blog.naver.com' -H 'Accept-Encoding: gzip,deflate,sdch' -H 'Accept-Language: ko-KR,ko;q=0.8,en-US;q=0.6,en;q=0.4' -H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/35.0.1916.153 Safari/537.36' -H 'Content-Type: application/x-www-form-urlencoded; charset=UTF-8' -H 'Accept: */*' -H 'charset: utf-8' -H 'Cache-Control: no-cache' -H 'Referer: http://blog.naver.com/PostWriteCaptchaLayerOpen.nhn?blogId=plmmoknn' -H 'Cookie: NNB=YLXBSFUGBOQFC; NB=HE2TGMRSGQYDSNRQ; npic=upzXgATKcNn+fj5aqUTduzajFPKrGT+8WdkN+r1/itHPZ2AReEvC/9j8+VAQeOS5CA==; stat_guestid=13694583493531q2mFP71; __gads=ID=75145ed6c8f18a93:T=1374249071:S=ALNI_MbE7KnhCOkb6JnTEEYI7KMwq6jsdQ; stat_yn=1; NNF=off; nid_tct=Pp8xbq5sjlGZzp73; WMONID=mAcvldt_CmI; visitcount|inmydream864=inmydream864; visitcount|jiyeon0153=jiyeon0153; visitcount|soungsu12=soungsu12; visitcount|wmxxxxxxxx=wmxxxxxxxx; BMR=s=1402637131503&r=http%3A%2F%2Fnstore.naver.com%2Fappstore%2Fweb%2Fdetail.nhn%3FproductNo%3D1336080&r2=http%3A%2F%2Fnstore.naver.com%2Fappstore%2Fandroid%2Fhome.nhn; srch_date="day|2014/06/14|2014/06/14"; mrblog=plmmoknn%ok; visitcount|ssaea=ssaea; bHideResizeNotice=1; page_uid=RH1BJdpySD8sstT+urVssssssuh-047384; NID_SES=AAABSVBmnK6jjbTC2BG67qLhOIJckBHoz7S+SWf040yQl8wHJKkUzf0rcd5o98FCLZOTHrtEW30aLR600TejviMoMwP4vnHt89RTpK1tnciO4ORHcT8x97X+Xb95TuHKSg5qAOxbV+MGtBfHISlYuKwagcD6umQjtz6w+cyGx+KKQW6FQhynpgdhJl7lqdXDzQFz8c6KVyC058ASkecShaulRFMjwDUR7hOBMFdEKn+OpMO2no0PSRo1ra7wZfSD+eLm2xRmd8XJoY9vQP4OwlHgVgrXzNGFSjyGlBQRbFaT2JGBc5MDQRJLtmVj+VcSnS6OvhGEr+JpX8uMCEIGyDQqcdD+ExperHmaOA7FFVKJZ3DGxskCaFq7TsIYhEi8XsH6YCPBBn/UoqMnRt6XbVVlA5A4KPEZO/LhAQoW61MPRLrh5LRHalRCWbi+J2S8nmWDgA==; NID_AUT=OGMLDuw4WwwCFu9qI/0Jybcn3sCpcPaRpXz6EIL0NZnDKkkFb1yrYDddGn1xYhc00pS5DTozwAHn4P5O5MCdOC/aDkKdfiVkpaOYmEXMbhCl+u9pZOVgFTxZ0s+bMp98; JSESSIONID=7F7127E16E47B77327C5FAECE2E7021A.jvm1' -H 'Connection: keep-alive' --data 'captchaValue=#{captcha_value}&captchaKey=#{captcha_key}' --compressed`

    return captcha_key, captcha_value
  end

end
